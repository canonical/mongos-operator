{"uid":"9368ebcc506cc5dd","name":"test_waits_for_config_server","fullName":"tests.integration.test_charm#test_waits_for_config_server","historyId":"64085c8d810e884b33d68de7ca088f20","time":{"start":1729474419298,"stop":1729474719651,"duration":300353},"description":"Verifies that the application and unit are active.","descriptionHtml":"<p>Verifies that the application and unit are active.</p>\n","status":"failed","statusMessage":"AssertionError: unit mongos/1 not in blocked state, in maintenance","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: TResult | None = func()\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/threadexception.py\", line 92, in pytest_runtest_call\n    yield from thread_exception_runtest_hook()\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/threadexception.py\", line 68, in thread_exception_runtest_hook\n    yield\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/unraisableexception.py\", line 95, in pytest_runtest_call\n    yield from unraisable_exception_runtest_hook()\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/unraisableexception.py\", line 70, in unraisable_exception_runtest_hook\n    yield\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/logging.py\", line 846, in pytest_runtest_call\n    yield from self._runtest_for(item, \"call\")\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/logging.py\", line 829, in _runtest_for\n    yield\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/capture.py\", line 880, in pytest_runtest_call\n    return (yield)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/skipping.py\", line 257, in pytest_runtest_call\n    return (yield)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 174, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1627, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 159, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mongos-operator/mongos-operator/tests/integration/test_charm.py\", line 41, in test_waits_for_config_server\n    await wait_for_mongos_units_blocked(\n  File \"/home/runner/work/mongos-operator/mongos-operator/tests/integration/helpers.py\", line 244, in wait_for_mongos_units_blocked\n    for attempt in Retrying(\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 443, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 376, in iter\n    result = action(retry_state)\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 418, in exc_check\n    raise retry_exc.reraise()\n  File \"/home/runner/work/mongos-operator/mongos-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 185, in reraise\n    raise self.last_attempt.result()\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 451, in result\n    return self.__get_result()\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 403, in __get_result\n    raise self._exception\n  File \"/home/runner/work/mongos-operator/mongos-operator/tests/integration/helpers.py\", line 248, in wait_for_mongos_units_blocked\n    await check_all_units_blocked_with_status(ops_test, app_name, status)\n  File \"/home/runner/work/mongos-operator/mongos-operator/tests/integration/helpers.py\", line 224, in check_all_units_blocked_with_status\n    status_type == \"blocked\"\nAssertionError: unit mongos/1 not in blocked state, in maintenance","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1729474129497,"stop":1729474129497,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1729474129498,"stop":1729474129498,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1729474129498,"stop":1729474129633,"duration":135},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1729474419297,"stop":1729474419297,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"abort_on_fail::0","time":{"start":1729474719655,"stop":1729474719655,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1729474719678,"stop":1729474720848,"duration":1170},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1729474720849,"stop":1729474720849,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1729474720849,"stop":1729474720849,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1729474720849,"stop":1729474720849,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_charm"},{"name":"host","value":"fv-az732-443"},{"name":"thread","value":"15833-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_charm"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"b1a47ca6f7d40d9c","status":"unknown","time":{}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":68,"unknown":1,"total":70},"items":[{"uid":"75c1b370e27aacf0","reportUrl":"../518//#testresult/75c1b370e27aacf0","status":"passed","time":{"start":1729388007082,"stop":1729388038666,"duration":31584}},{"uid":"c2ccaf65cbd754a9","reportUrl":"../517//#testresult/c2ccaf65cbd754a9","status":"passed","time":{"start":1729301725365,"stop":1729301727054,"duration":1689}},{"uid":"baeaeffe7c2c828f","reportUrl":"../515//#testresult/baeaeffe7c2c828f","status":"passed","time":{"start":1729215526206,"stop":1729215567037,"duration":40831}},{"uid":"ab907e086264b8dc","reportUrl":"../514//#testresult/ab907e086264b8dc","status":"passed","time":{"start":1729128893840,"stop":1729128937183,"duration":43343}},{"uid":"284fe1037b86baac","reportUrl":"../512//#testresult/284fe1037b86baac","status":"passed","time":{"start":1729042395650,"stop":1729042427089,"duration":31439}},{"uid":"9ff119cf070b9b17","reportUrl":"../511//#testresult/9ff119cf070b9b17","status":"passed","time":{"start":1728956065061,"stop":1728956105295,"duration":40234}},{"uid":"a1823f03fe6a67a4","reportUrl":"../509//#testresult/a1823f03fe6a67a4","status":"passed","time":{"start":1728869678161,"stop":1728869680084,"duration":1923}},{"uid":"eb947d03c5ce6878","reportUrl":"../508//#testresult/eb947d03c5ce6878","status":"passed","time":{"start":1728783199460,"stop":1728783227456,"duration":27996}},{"uid":"115a2a880f96010a","reportUrl":"../507//#testresult/115a2a880f96010a","status":"passed","time":{"start":1728696805306,"stop":1728696839038,"duration":33732}},{"uid":"12e113d32531017a","reportUrl":"../506//#testresult/12e113d32531017a","status":"passed","time":{"start":1728610442070,"stop":1728610481207,"duration":39137}},{"uid":"486ac2cba12a1daa","reportUrl":"../503//#testresult/486ac2cba12a1daa","status":"passed","time":{"start":1728524240682,"stop":1728524286698,"duration":46016}},{"uid":"e2738b18b2c291d8","reportUrl":"../500//#testresult/e2738b18b2c291d8","status":"passed","time":{"start":1728437592148,"stop":1728437621268,"duration":29120}},{"uid":"28ae3559b0928312","reportUrl":"../497//#testresult/28ae3559b0928312","status":"passed","time":{"start":1728351205507,"stop":1728351241579,"duration":36072}},{"uid":"5b102cb7c77c63c3","reportUrl":"../496//#testresult/5b102cb7c77c63c3","status":"passed","time":{"start":1728264792631,"stop":1728264824402,"duration":31771}},{"uid":"e549050b6b12e2d","reportUrl":"../495//#testresult/e549050b6b12e2d","status":"passed","time":{"start":1728178425335,"stop":1728178458998,"duration":33663}},{"uid":"503b53b364001b32","reportUrl":"../494//#testresult/503b53b364001b32","status":"passed","time":{"start":1728092004932,"stop":1728092038069,"duration":33137}},{"uid":"8771469c79491403","reportUrl":"../492//#testresult/8771469c79491403","status":"passed","time":{"start":1728005617819,"stop":1728005658451,"duration":40632}},{"uid":"ba38f12b81a476da","reportUrl":"../485//#testresult/ba38f12b81a476da","status":"passed","time":{"start":1727919237420,"stop":1727919274276,"duration":36856}},{"uid":"4bc5e1c2f41a8abb","reportUrl":"../472//#testresult/4bc5e1c2f41a8abb","status":"passed","time":{"start":1727832773017,"stop":1727832806522,"duration":33505}},{"uid":"bddd55fac0f95fde","reportUrl":"../469//#testresult/bddd55fac0f95fde","status":"passed","time":{"start":1727746410699,"stop":1727746443792,"duration":33093}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"9368ebcc506cc5dd.json","parameterValues":[]}